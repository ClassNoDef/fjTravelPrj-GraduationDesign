<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="/css/adminCenter/amazeui.min.css" />
		<link rel="stylesheet" href="/css/adminCenter/admin.css" />
		<link rel="stylesheet" href="">
	</head>
	<script src="/js/adminCenter/mods/index.js"></script>
	<script src="/libs/jquery/jquery-3.3.1.min.js"></script>
	<script type="text/javascript">
		function deleteMyWork(id) {
			var c=confirm("您真的要这篇删除游记吗？");
			if(c==true) {
				//alert("aaa")
				$.ajax({
							url: "/work/deleteMyWork/"+id,
							type: "post",
							data: null,
							success: function (data) {
								if(data.meta.success==true) {
									alert("删除成功！")
									location.href = "/work/myWork"
								}
								else{
									$("#errmsg").text(data.meta.message)
									return
								}
							}
						}
				)
			}
			else;
		}
		</script>
	</head>

	<body>
		<div class="admin-content-body">
			<div class="am-cf am-padding am-padding-bottom-0">
				<div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">我的作品</strong><small></small></div>
			</div>

			<hr>

			<div class="am-g">
				<div class="am-u-sm-12 am-u-md-6">
					<div class="am-btn-toolbar">
						<div class="am-btn-group am-btn-group-xs">

						</div>
					</div>
				</div>
				<div class="am-u-sm-12 am-u-md-3">

				</div>
				<div class="am-u-sm-12 am-u-md-3">
					<div class="am-input-group am-input-group-sm">

					</div>
				</div>
			</div>
			<div class="am-g">
				<div class="am-u-sm-12">
					<form class="am-form">
						<table class="am-table am-table-striped am-table-hover table-main">
							<thead>
								<tr>
									<th class="table-type">标题</th>
									<th class="table-type">创建时间</th>
									<th class="table-type">作品类型</th>
									<th class="table-type">描述景点</th>
									<th class="table-type">作品状态</th>
									<th class="table-type">点赞数量</th>
									<th class="table-type"></th>
									<th class="table-set">操作</th>
									<th class="table-type"></th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="work:${userWorks}" >
									<td th:text="${work.workTitle}"></td>
									<td th:text="${#dates.format(work.workCreateTime,'yyyy-MM-dd HH:mm:ss ')}"></td>
									<td th:text="${work.workType.noteTypeName}"></td>
									<td th:text="${work.workAttrac.attracName}"></td>
									<td th:if="${work.workStatus} eq 0">未审核</td>
									<td th:if="${work.workStatus} eq 1">已发布</td>
									<td th:if="${work.workStatus} eq 2">已被屏蔽</td>
									<td th:if="${work.workStatus} eq 3">已删除</td>
									<th:block th:if="(${work.workStatus} != 2) and(${work.workStatus} !=3)">
									<td th:text="${work.workLikeCount}"></td>
									<td><a th:href="@{'/work/userWorkDetail/'+${work.workId}}" class="am-btn am-btn-default am-btn-xs am-text-secondary" >详细信息</a></td>
									<td><a th:href="@{'/work/updateWork/'+${work.workId}}" class="am-btn am-btn-default am-btn-xs am-text-secondary">修改游记</a></td>
									<td><button th:onclick="'deleteMyWork('+${work.workId}+')'" class="am-btn am-btn-default am-btn-xs am-text-secondary" >删除游记</button></td>
									</th:block>
									<th:block th:if="${work.workStatus} == 2">
										<td th:text="--"></td>
										<td>游记已被屏蔽，请联系网站管理员</td>
									</th:block>
									<th:block th:if="${work.workStatus} == 3">
										<td th:text="--"></td>
										<td>游记已删除，若要恢复请联系网站管理员</td>
									</th:block>

								</tr>
							</tbody>
						</table>


						<hr>
					</form>
				</div>
			</div>
		</div>
	</body>
</html>
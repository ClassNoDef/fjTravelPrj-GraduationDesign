<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="/css/adminCenter/amazeui.min.css" />
		<link rel="stylesheet" href="/css/adminCenter/admin.css" />
		<link rel="stylesheet" href="">
	</head>
	<script src="/js/adminCenter/mods/index.js"></script>
	<script src="/libs/jquery/jquery-3.3.1.min.js"></script>
<script type="text/javascript">
	function deleteCity(id,name) {
		var c=confirm("您真的要删除设区市："+name+" 吗？");
		if(c==true) {
			//alert("aaa")
			$.ajax({
						url: "/cityMgr/deleteCity/"+id,
						type: "get",
						data: null,
						success: function (data) {
							if(data.meta.success==true) {
								alert("删除成功！")
								location.href = "/cityMgr/loadCitys"
							}
							else{
								$("#errmsg").text(data.meta.message)
								return
							}
						}
					}
			)
		}
		else;
	}

	$(function () {
		$.ajax({
			url: "/cityMgr/loadCitysAjax/",
			type: "post",
			data: null,
			success: function (data) {
				for (var i = 0; i < data.length; i++) {
					var str = ""
					str += "<tr>"+
							"<td>"+data[i].cityId+"</td>" +
							"<td>"+data[i].cityName+"</td>" +
							"<td>"+data[i].cityEngName+"</td>" +
							"<td>"+data[i].attracCount+"</td>" +
							"<td><a href='/cityMgr/updateCity/" + data[i].cityId + "' class='am-btn am-btn-default am-btn-xs am-text-secondary' >更新</a></td>" +
							"<td><a onclick='deleteCity(" + data[i].cityId + ",\"" + data[i].cityName + "\")'  class='am-btn am-btn-default am-btn-xs am-text-secondary'>删除</a></td>"+
							"</tr>";
					$("#cList").append(str)
				}
			}
		})
	})

</script>

	<body>
		<div class="admin-content-body">
			<div class="am-cf am-padding am-padding-bottom-0">
				<div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">设区市管理</strong><small></small></div>
			</div>

			<hr>

			<div class="am-g">
				<div class="am-u-sm-12 am-u-md-6">
					<div class="am-btn-toolbar">
						<div class="am-btn-group am-btn-group-xs">
							<a th:href="@{/cityMgr/createCity}" class="am-btn am-btn-default"><span class="am-icon-plus"></span> 新增</a>
						</div>
					</div>
				</div>
				<div class="am-u-sm-12 am-u-md-3">

				</div>
				<div class="am-u-sm-12 am-u-md-3">

				</div>
			</div>
			<div class="am-g">
				<div class="am-u-sm-12">
					<p id="errmsg" style="color: red">

					</p>
					<form class="am-form">
						<table class="am-table am-table-striped am-table-hover table-main">
							<thead>
								<tr>
									<th class="table-type">ID</th>
									<th class="table-type">设区市名</th>
									<th class="table-type">设区市英文名</th>
									<th class="table-type">景点计数</th>
									<th class="table-type"></th>
									<th class="table-set">操作</th>
									<th class="table-type"></th>
								</tr>
							</thead>
							<tbody id="cList">

							</tbody>
						</table>


						<hr>
					</form>
				</div>
			</div>
		</div>
	</body>
</html>